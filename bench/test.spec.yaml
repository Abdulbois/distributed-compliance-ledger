---
templates:
  add-model: &add-model-tmpl
      vid: 1
      pid: 1
      name: Device
      description: decription
      sku: SKU12FS
      hardware-version: 1.0
      firmware-version: 2.0
      tis-or-trp-testing-completed: "true"

defaults:
  account-number-start: 4
  sequence-number-start: 0
#   from
#   sequence
#   (optional) account-number
#   txns: - common txns

{%- if ctx is not defined %}
  {%- set ctx = {} %}
{%- endif %}

{%- set write_users_c = ctx.get("write_users_count", 10) | int  + 1 %}
{%- set write_users_q_c = ctx.get("write_users_q_count", 1000) | int + 1 %}

users:
  {%- for vid in range(1, write_users_c) -%}

  {% set vid_str = "%05d"|format(vid) %}
  tu{{ vid_str }}:
    q:
    {%- for pid in range(1, write_users_q_c) %}
      - tx/modelinfo/add-model:
          <<: *add-model-tmpl
          vid: {{ vid_str }}
          pid: {{ pid }}
    {%- endfor %}

  {%- endfor %}
